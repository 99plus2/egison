(load "lib/tree/xml.egi")

(define $xml1
  <Node "top"
        {<Node "middle1" {<Leaf "text1">
                          <Leaf "text2">
                          <Leaf "text3">
                          <Leaf "text2">
                          <Leaf "text3">
                          }>
         <Node "middle2" {<Leaf "text1">
                          <Leaf "text2">
                          <Leaf "text3">
                          <Leaf "text2">
                          <Leaf "text3">
                          }>

         <Node "middle3" {<Leaf "text1">
                          <Leaf "text2">
                          <Leaf "text3">
                          <Leaf "text4">
                          <Leaf "text5">
                          }>
         }>)

         
(test (match-all xml1 xml
        [<mdescendant <mnode $tag _>
                            _> [tag]]))

(test (match-all xml1 xml
        [<mdescendant <mnode $tag <cons $x <cons ,x _>>>>
         [tag x]]))
