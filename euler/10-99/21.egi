(define $proc2
  (memoized-lambda [$d]
    (foldl + (neg d)
           (unique (match-all (p-f d) (multiset integer)
                     [<join $ps _> (foldl * 1 ps)])))))

(define $proc1
  (memoized-lambda [$d]
    (eq? (proc2 (proc2 d)) d)))
    
(test (foldl + 0 (filter proc1 (take 10000 nats))))
